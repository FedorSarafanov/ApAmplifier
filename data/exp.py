import numpy as np
from matplotlib import pyplot as plt
# схема с общим э.п остоянные напряжения относительно земли:
# Uэ=91.5 мВ
# Uб=239 мВ
# Uк=4.5 В


# 3. f=1000 

# C отключен
ff,uu=np.array([
	[20,	320],
	[25,	600],
	[30,	980],
	[35,	1320],
	[40,	1580],
	[45,	1960],
	[50,	2200],
	[55,	2400],
	[60,	2760],
	[65,	3000],
	[70,	3280],
	[75,	3520],
	[80,	3840],
	[85,	4080],
	[90,	4240],
	[95,	4560],
	[100,	4720],
	[114,	5360],
	[120,	5680],
	[125,	5920],
	[130,	6000],
	[144,	6480],
	[150,	6560],
	[165,	7040],
	[168,	7120],
	[184,	7400],
	[192,	7400],
	[208,	7400],
    ]).T

# C включен
ffc,uuc=np.array([
	[20,	128],
	[20,	128],
	[20,	128],
	[40,	448],
	[55,	720],
	[67,	940],
	[80,	1200],
	[96,	1440],
	[126,	1900],
	[150,	2360],
	[170,	2710],
	[186,	3000],
	[220,	3560],
	[220,	3560],
	[252,	4080],
	[252,	4080],
	[286,	4560],
	[286,	4560],
	[316,	4960],
	[342,	5360],
	[380,	5760],
	[410,	6160],
	[456,	6800],
	[456,	6800],
	[520,	7200],
	[568,	7400],
	[664,	7600],
	[964,	7600],
    ]).T

# import sys

# orig_stdout = sys.stdout
# f = open('common_emitter.dat', 'w')
# sys.stdout = f

# print('%s\t%s\t%s\t%s'%('uin','uout','uinc','uoutc'))
# for i in range(0, len(ff)):
# 	print('%s\t%s\t%s\t%s'%(ff[i]/2,uu[i]/2,ffc[i]/2,uuc[i]/2))
# sys.stdout = orig_stdout
# f.close()
# sys.exit()


# plt.plot(ff,uu,'o-', markersize=2, color='blue', linewidth=1.5)
# plt.plot(ffc,uuc,'o-', markersize=2, color='red', linewidth=1.5)
# plt.show()

# uin=233 mV (линейный участок)
f,uu5c=np.array([
	[20,	1440],
	[30,	2060],
	[40,	2460],
	[50,	2720],
	[60,	3000],
	[70,	3120],
	[80,	3240],
	[90,	3340],
	[100,	3400],
	[120,	3520],
	[140,	3560],
	[160,	3580],
	[180,	3600],
	[200,	3620],
	[220,	3640],
	[240,	3660],
	[260,	3680],
	[280,	3680],
	[300,	3680],
	[320,	3700],
	[340,	3700],
	[360,	3720],
	[400,	3720],
	[500,	3720],
	[600,	3720],
	[700,	3720],
	[800,	3710],
	[1000,	3710],
	[2000,	3700],
	[4000,	3700],
	[6000,	3600],
	[8000,	3620],
	[10000,	3620],
	[20000,	3600],
	[30000,	3640],
	[40000,	3640],
	[50000,	3400],
	[60000,	3400],
	[70000,	3260],
	[80000,	3160],
	[90000,	3060],
	[100000,	2900],
	[110000,	2800],
	[120000,	2700],
	[130000,	2580],
	[140000,	2500],
	[150000,	2360],
	[160000,	2300],
	[180000,	2140],
	[190000,	2060],
	[200000,	1940],
	]).T

f,uu5=np.array([
	[20,	1400],
	[30,	2020],
	[40,	2500],
	[50,	2940],
	[60,	3300],
	[70,	3600],
	[80,	3920],
	[90,	4160],
	[100,	4480],
	[120,	4960],
	[140,	5320],
	[160,	5640],
	[180,	6000],
	[200,	6160],
	[220,	6360],
	[240,	6540],
	[260,	6760],
	[280,	6880],
	[300,	6980],
	[320,	7080],
	[340,	7120],
	[360,	7220],
	[400,	7280],
	[500,	7340],
	[600,	7360],
	[700,	7360],
	[800,	7360],
	[1000,	7360],
	[2000,	7360],
	[4000,	7360],
	[6000,	7360],
	[8000,	7360],
	[10000,	7360],
	[20000,	7320],
	[30000,	7120],
	[40000,	6820],
	[50000,	6520],
	[60000,	6220],
	[70000,	5900],
	[80000,	5620],
	[90000,	5380],
	[100000,	5080],
	[110000,	4780],
	[120000,	4540],
	[130000,	4280],
	[140000,	4100],
	[150000,	3800],
	[160000,	3640],
	[180000,	3260],
	[190000,	3120],
	[200000,	2960],
	]).T

fnew, unew=np.array([
	[20,	0.24],
	[25,	0.32],
	[30,	0.48],
	[35,	0.50],
	[40,	0.55],
	[45,	0.64],
	[50,	0.64],
	[55,	0.64],
	[60,	0.72],
	[70,	0.8],
	[80,	0.96],
	[90,	1.04],
	[100,	1.12],
	[110,	1.28],
	[120,	1.28],
	[140,	1.36],
	[150,	1.52],
	[160,	1.52],
	[180,	1.68],
	[200,	1.92],
	[250,	2],
	[300,	2.24],
	[350,	2.48],
	[450,	2.56],
	[600,	2.64],
	[800,	2.64],
	[1200,	3.04],
	[2000,	3.36],
	[3000,	3.36],
	[4000,	3.44],
	[5000,	3.44],
	[6000,	3.44],
	[7000,	3.44],
	[8000,	3.44],
	[9000,	3.44],
	[10000,	3.44],
	[11000,	3.44],
	[12000,	3.44],
	[13000,	3.36],
	[14000,	3.36],
	[15000,	3.44],
	[16000,	3.36],
	[18000,	3.28],
	[20000,	3.44],
	[25000,	3.44],
	[30000,	3.36],
	[35000,	3.36],
	[40000,	3.28],
	[45000,	3.2],
	[50000,	3.12],
	[55000,	3.04],
	[60000,	3.2],
	[65000,	3.2],
	[70000,	3.2],
	[75000,	3.12],
	[80000,	3.04],
	[85000,	2.96],
	[90000,	2.96],
	[95000,	2.96],
	[100000,	2.96],
	[110000,	2.96],
	[120000,	2.88],
	[130000,	2.8],
	[140000,	2.72],
	[150000,	2.72],
	[160000,	2.64],
	[170000,	2.64],
	[180000,	2.56],
	[190000,	2.56],
	[200000,	2.54],
	]).T

F=f
import sys

orig_stdout = sys.stdout
f= open('common_emitter_new.dat', 'w')
sys.stdout = f

print('%s\t%s'%('f','u'))
for i in range(0, len(fnew)):
	print('%s\t%s'%(fnew[i],unew[i]*1000))
sys.stdout = orig_stdout
f.close()
# sys.exit()

plt.semilogx(fnew,unew*1000/108,'o-', markersize=2, color='red', linewidth=1.5)
plt.semilogx(F,uu5/233,'o-', markersize=2, color='blue', linewidth=1.5)
# plt.plot(f,uu5/233,'o-', markersize=2, color='blue', linewidth=1.5)
plt.show()


# 6. R_вх:

# Uвх=228 мВ, f=1000Гц
# Uвых=3720
# 

# 3.1) OK
# u_base=4.51
# u_collector=8.22
# u_emmiter=4.57

# C отключен
uin,uout=np.array([
	[20,	32],
	[25,	45],
	[30,	47],
	[35,	50],
	[40,	60],
	[85,	95],
	[100,	118],
	[200,	198],
	[300,	288],
	[400,	380],
	[500,	460],
	[600,	580],
	[700,	640],
	[940,	860],
	[1340,	1240],
	[1340,	1240],
	[1520,	1380],
	[1760,	1640],
	[2280,	2120],
	[2800,	2520],
	[3760,	3460],
	[6640,	6000],
	[8000,	7000],
    ]).T

# import sys

# orig_stdout = sys.stdout
# f = open('common_collector.dat', 'w')
# sys.stdout = f

# print('%s\t%s'%('uin','uout'))
# for i in range(0, len(uout)):
# 	print('%s\t%s'%(uin[i]/2,uout[i]/2))
# sys.stdout = orig_stdout
# f.close()
# sys.exit()


# plt.plot(uin,uout,'o-', markersize=2, color='blue', linewidth=1.5)
# plt.plot(ffc,uuc,'o-', markersize=2, color='red', linewidth=1.5)
# plt.show()

# 3.5 K(f)

# uin=1000 mv
f35,uu35=np.array([
	[20,	900],
	[30,	920],
	[40,	940],
	[50,	950],
	[60,	940],
	[70,	940],
	[80,	940],
	[90,	940],
	[100,	940],
	[120,	940],
	[140,	940],
	[200,	940],
	[2000,	940],
	[4000,	940],
	[8000,	920],
	[9000,	920],
	[10000,	920],
	[20000,	900],
	[30000,	900],
	[40000,	880],
	[50000,	860],
	[60000,	860],
	[70000,	860],
	[80000,	860],
	[90000,	850],
	[100000,	845],
	[110000,	840],
	[120000,	840],
	[130000,	840],
	[140000,	840],
	[150000,	830],
	[160000,	820],
	[180000,	820],
	[190000,	820],
	[200000,	820],
	]).T

# orig_stdout = sys.stdout
# f = open('common_collector_freqamp.dat', 'w')
# sys.stdout = f

# print('%s\t%s'%('f','u'))
# for i in range(0, len(f35)):
# 	print('%s\t%s'%(f35[i],uu35[i]/2))
# sys.stdout = orig_stdout
# f.close()
# sys.exit()

# plt.ylim([0,1000])
# plt.semilogx(f35,uu35,'o-', markersize=2, color='blue', linewidth=1.5)
# # plt.plot(ffc,uuc,'o-', markersize=2, color='red', linewidth=1.5)
# plt.show()

# 4.1) ОЭ -- R1=0, C вкл, R2=1 кОм вкл, Uвх=136 мВ, Uвых=980мВ
# 4.2) ОЭ-ОК, R1=0, С вклю, R2 =1 ком вкл, Uвх=136 мВ, Uвых=1720мВ